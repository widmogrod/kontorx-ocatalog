var iconType=[]; function getGIcon(a){switch(a){case "1":a="standard";break;case "2":a="medium";break;case "3":a="premium";break;default:a="default";break}if(!iconType[a]){iconType[a]=new GIcon;iconType[a].image=base_url+"/css/"+CATALOG_TYPE+"/img/gmap/marker-"+a+".png";iconType[a].iconAnchor=new GPoint(25,25);iconType[a].infoWindowAnchor=new GPoint(25,25);switch(a){case "default":iconType[a].iconSize=new GSize(25,25);break;case "standard":iconType[a].iconSize=new GSize(35,35);break;default:iconType[a].iconSize=new GSize(45, 45)}}return iconType[a]}function showAddress(a,e){if(G_MAP_LAT!=undefined&&G_MAP_LNG!=undefined)if(parseInt(G_MAP_LAT)!=0||parseInt(G_MAP_LNG)!=0){var c=new GLatLng(G_MAP_LAT,G_MAP_LNG);map.setCenter(c,e);return}a="Krak\u00f3w, "+a;geocoder&&geocoder.getLatLng(a,function(b){b?map.setCenter(b,e==undefined?14:parseInt(e)):alert(a+" not found")})} (function(a){a("#loader").ajaxStart(function(){a(this).show()}).ajaxStop(function(){a(this).hide()});a("#mapForm").submit(function(){showAddress(a("#autocomplete-adres").val(),16);return false});a("#autocomplete-adres").keydown(function(){a(this).addClass("loader")}).keyup(function(){a(this).removeClass("loader")});a("#autocomplete-adres").autocomplete({url:"/catalog/list/autocompleteadress",dataType:"json",delay:450,autoFill:true,parse:function(e){var c=[];a(e).each(function(b,d){c.push({data:d, value:d.adress,result:d.adress})});return c},formatItem:function(e){return e.adress},selected:function(){}})})(jQuery);var map=null,base_url=window.location.protocol.replace(/(:\/\/|:)/,"");base_url+="://";base_url+=CATALOG_HOSTNAME; (function(a){if(GBrowserIsCompatible()){map=new GMap2(document.getElementById("googleMaps"));map.enableScrollWheelZoom();map.setCenter(new GLatLng(50.0646501,19.9449799),12);map.addControl(new GLargeMapControl);map.addControl(new GMapTypeControl);mgr=new MarkerManager(map);geocoder=new GClientGeocoder;a.ajax({url:"data/gmap.json",dataType:"json",success:function(e){var c={premium:[],medium:[],standard:[],"default":[]};a(e).each(function(b,d){var f=new GLatLng(d.lat,d.lng);b=d.catalog_promo_type_id; var g={icon:getGIcon(b),title:d.name};f=new GMarker(f,g);f.bindInfoWindowHtml("<b>"+d.name+'</b><br/><a href="'+base_url+"/"+CATALOG_SHOW_ROUTE+"/"+d.id+'"> zobacz wi\u0119cej &raquo;</a>',{pixelOffset:new GSize(100,20)});switch(b){case "1":b="standard";break;case "2":b="medium";break;case "3":b="premium";break;default:b="default";break}c[b].push(f)});mgr.addMarkers(c.premium,9);mgr.addMarkers(c.medium,9);mgr.addMarkers(c.standard,9);mgr.addMarkers(c["default"],10);mgr.refresh()},error:function(){}})}})(jQuery);